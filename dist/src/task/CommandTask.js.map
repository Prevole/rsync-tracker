{"version":3,"file":"CommandTask.js","sourceRoot":"","sources":["../../../src/task/CommandTask.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,2DAAmC;AAEnC,kDAA0B;AAE1B,iBAA0C,SAAQ,cAAI;IAOpD,GAAG;QACD,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAE/B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,OAAO,EAAE,CAAC,CAAC;QAE5C,IAAI;YACF,MAAM,MAAM,GAAW,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YACnE,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;gBACvB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAC;aAC5D;iBAAM;gBACL,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;aACrC;YACD,OAAO,IAAI,CAAC;SACb;QAAC,OAAO,GAAG,EAAE;YACZ,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACvB,OAAO,KAAK,CAAC;SACd;IACH,CAAC;CAGF;AAzBC;IADC,gBAAM,EAAE;iDACiB;AAG1B;IADC,gBAAM,EAAE;2CACe;AAL1B,8BA2BC","sourcesContent":["import Inject from '../ioc/Inject';\nimport Logger from '../logging/Logger';\nimport Task from './Task';\n\nexport default abstract class CommandTask extends Task {\n  @Inject()\n  private childProcess: any;\n\n  @Inject()\n  private logger!: Logger;\n\n  run(): boolean {\n    const command = this.command();\n\n    this.logger.info(`Run command: ${command}`);\n\n    try {\n      const result: Buffer = this.childProcess.execSync(command, 'utf8');\n      if (result.length === 0) {\n        this.logger.info('The command produced no result content');\n      } else {\n        this.logger.info(result.toString());\n      }\n      return true;\n    } catch (err) {\n      this.logger.error(err);\n      return false;\n    }\n  }\n\n  protected abstract command(): string;\n}\n"]}